{"version":3,"sources":["reducers/gameReducer.js","reducers/rootReducer.js","components/cards/CardFront.js","components/cards/CardBack.js","components/cards/FlippableCard.js","components/cards/MovableFlippableCard.js","components/game/helperFunctions.js","components/cards/DraggableCard.js","components/game/ControllablePlayerCard.js","components/game/PlayerCards.js","components/game/CommonGameStacks.js","components/game/ControllableComputerCard.js","components/game/ComputerCards.js","components/game/ControlPanel.js","components/game/Game.js","components/setup/WelcomeView.js","components/setup/SmallDot.js","components/setup/LargeDot.js","components/setup/DottedSlider.js","components/setup/Stack.js","components/setup/StackSelection.js","components/setup/SelectionView.js","components/setup/createStacks.js","components/setup/SetUpGame.js","components/game/Winner.js","components/GameOfNopsa.js","App.js","index.js"],"names":["initialState","isOn","gameReducer","state","action","type","data","playerStack","computerStack","rootReducer","combineReducers","game","CardFront","card","color","char","suit","cardText","value","View","style","justifyContent","alignItems","Text","fontSize","CardBack","scaleUnit","viewStyle","backgroundColor","width","height","borderRadius","rows","i","push","key","displayCards","FlippableCard","React","forwardRef","props","ref","cardStyle","getCardStyle","unitsAndLocations","unit","animatedFlipBacksideValue","Animated","Value","animatedFlipBacksideStyle","transform","rotateX","interpolate","inputRange","outputRange","animatedFlipFrontsideValue","animatedFlipFrontsideStyle","flip","flipDuration","performFlipAnimations","useImperativeHandle","position","left","sequence","timing","toValue","tension","friction","duration","start","MovableFlippableCard","useState","ValueXY","animatedMove","animatedMoveStyle","translateX","x","translateY","y","startLocation","referenceFlip","createRef","flipOnly","flipDurationDealing","current","moveAndPossiblyFlipWithDelay","moveDurationDealing","delay","index","moveToNewLocation","endLocation","setTimeout","moveCardToLocation","location","top","convertCardState","newLocation","moveDuration","getCardFlipStateAfterDealing","cardIndex","cardCount","wasReleasedOnRightStack","releaseX","releaseY","spacing","gamingStackRightX","gamingStackRightY","wasReleasedOnLeftStack","gamingStackLeftX","gamingStackLeftY","valueIsOKforPlacingOntoStack","whatStack","topmostLeft","topmostRight","newCard","currentTopmostValue","newValue","getIndexOfPossibleCardBelow","onTopAndBelowCardIndexPairs","Map","get","getLeftOrRightStackXY","scalingUnit","side","positionY","toLeftOrRightGameStackInSingleCardDealing","countOfThisPlayerCardsToDealTogether","opponentCardCount","countOfOpponentCardsToDealTogether","Math","min","getComputerCardSolitaireLocation","unitHeight","origoY","positionX","getCardStatesAtStart","cardStates","getOccupancyDataAfterFirstDealingCards","occupancies","number","handleCardStateChanges","cardsAndNewStates","setCardStates","updatedCardStates","length","newState","handleOccupancyDataChanges","positionToOccupy","occupancyData","setOccupancyData","locationToFree","updatedOccupancyData","j","getCurrentPosition","updateGameStackTopmostCard","topmostStuff","changeLeft","changeRight","getVisibleCardToMoveIndex","cards","visibleCardIndex","sets","look","indexOfCardAtThisPosition","DraggableCard","animatedDraggable","dragStyle","updatedLocation","setUpdatedLocation","panResponder","PanResponder","create","onStartShouldSetPanResponder","evt","gestureState","onPanResponderMove","event","moveCardAlongDrag","dx","dy","onPanResponderRelease","moveX","moveY","cardReleasedOnStackAndValueSuitableAndMoveFinalized","handleChangesAfterPlayingACard","cardReleasedOnEmptyPositionAndMoveFinalized","handleMovedCardToEmptyPosition","returnCardToStartDragPosition","TouchableOpacity","disabled","panHandlers","size","moveDurationComputerCardGaming","moveToNewPosition","newPosition","oldPosition","valueLeft","valueRight","whatStackCardWasReleasedOn","wasReleasedOnLeft","wasReleasedOnRight","whatStackWasReleasedOn","movementFinalization","moveCardToGameStack","whatEmptyPositionTheCardWasReleasedOn","emptyPositionsX","emptyPositionsY","emptyPosition","whatEmptyPositionWasReleasedOn","positionIndex","moveCardToEmptyPosition","ControllablePlayerCard","locationAtStart","getPlayerCardSolitaireLocation","getPlayerCardLocationAfterDealing","locationAfterDealing","cardWillFlipAfterDealing","cardState","PlayerCards","playerCards","map","cardReferences","indexDealNext","setIndexDealNext","dealSolitaireCards","limit","updateCardStatesAfterSolitaireDealing","dealSingleCard","toWhichStack","gamingStack","currentPosition","indexOfCardBelow","flipDurationGaming","emptyPositionIndex","isThereAPositionBelow","returnOccupancyData","returnGameRoundOverStateData","returnTopmostValues","right","useEffect","every","endRound","getCardViewStyle","commonStyles","zIndex","leftGamingStackXY","rightGamingStackXY","GameStack","topmost","background","CommonGameStacks","roundIsOver","cardViewStyleLeft","cardViewStyleRight","ControllableComputerCard","getComputerCardLocationAfterDealing","ComputerCards","computerCards","emptyPositionAndCardToMoveThere","firstEmptyPosition","keepLooking","cardToMoveIndex","getEmptyPositionAndCardToMoveThere","cardMovedIndex","handleEmptyMoveOccupancyDataChanges","startComputerCardMoveIfPossible","indexOfCardToMove","visibleCardIndexes","cardAndTarget","stack","k","visibleCard","leftOK","rightOK","target","getIndexOfCardToMoveAndTargetStack","targetPackLocation","finalizeCardMoveOrSendCardBackToSolitaire","flipPossibleCardBelow","ControlPanel","dealSingleCards","roundIsActive","changeGameIsActiveState","solitaireDealingDone","setSolitaireDealingDone","displayText","setDisplayText","styles","getStyles","alignSelf","onPress","buttonView","buttonText","StyleSheet","contents","marginTop","titleText","fontWeigth","fontFamily","infoText","spacer","padding","ConnectedGame","connect","setTopmostLeft","setTopmostRight","referencePlayerCards","referenceComputerCards","cumulativeLeftStack","setCumulativeLeftStack","cumulativeRightStack","setCumulativeRightStack","setRoundIsActive","theWinner","gameRoundOverPlayerStateData","gameRoundOverComputerStateData","topmostValues","gameRoundOver","updated","performRecurrentComputerCardAction","occupancyDataComputer","couldMoveCardsToEmptyPosition","occupancyDataPlayer","newCardsAreNeeded","checkIfNewCardDealingIsNeeded","fontStyle","visiblePlayerCardValues","getVisibleCards","visibleComputerCardValues","newOneCardDealingIsNeeded","emptyPositionsAvailable","cardAvailabelForMovingToEmptyPosition","count","visibleCardValues","leftValue","rightValue","valueIsOKforPlacingOntoAStack","WelcomeView","startSetting","visibility","animatedVisibility","opacity","SmallDot","dotViewWidth","styleOuterView","styleInnerView","dotNumber","LargeDot","handleSelectionChanged","borderWidth","borderColor","DottedSlider","optionCount","selectedValue","setSelectedValue","changeInterval","startValue","changes","max","changeUpOrDown","direction","setInterval","clearInterval","getSelectedValue","container","dotSliderView","dots","displayDotSlider","marginBottom","instructionText","fontWeight","flexDirection","Stack","displayColor","selectStack","stackStyle","StackSelection","selectedStack","setSelectedStack","changedSelection","id","getSelectedStack","player","computer","borderColorStack1","borderColorStack2","mapDispatchToProps","setGameSettings","settings","ConnectedSelectionView","referenceSkill","referenceSpeed","referenceStack","stacks","stackShuffled","shuffle","slice","createStacks","skill","speed","SetUpGame","settingNew","setSettingNew","EndView","winner","fadeOut","outcome","textOptions","title","1","2","text1","text2","ContinueView","playerCardsCount","computerCardsCount","endGame","ConnectedWinner","continueToNextRound","setGameRoundResults","results","ConnectedGameOfNopsa","screenWidth","Dimensions","screenHeight","getUnitsAndLocations","gameIsOn","setWinner","computerLeftoverSolitaireCardIndexes","getLeftoverSolitaireCardIndexes","playerLeftoverSolitaireCardIndexes","computerLeftoverDealingCards","getLeftoverDealingCards","playerLeftoverDealingCards","cumulativeStackToComputer","getCumulativeStack","cumulativeStackToPlayer","newComputerCardIndexes","concat","newPlayerCardIndexes","newComputerStack","getNewStack","newPlayererStack","GameWithRounds","screen","leftDealingStackXY","rightDealingStackXY","gameRoundOverStateData","filter","leftovers","toWhom","winnerCumulativeStack","loserCumulativeStack","indexes","oldStack","cumulativeStack","store","createStore","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c14b0245.chunk.js","sourcesContent":["const initialState = { isOn: false }\n\nconst gameReducer = (state = initialState, action) => {\n\n    switch (action.type) {\n    case 'SET_GAME_SETTINGS':\n        return action.data\n    case 'SET_GAMEROUND_RESULTS':\n        return { ...state, playerStack: action.data.playerStack, computerStack: action.data.computerStack }\n    case 'END_GAME':\n        return action.data\n    default:\n        return state\n    }\n\n}\n\nexport const setGameSettings = (settings) => {\n    return {\n        type: 'SET_GAME_SETTINGS',\n        data: settings,\n    }\n}\n\nexport const setGameRoundResults = (results) => {\n    return {\n        type: 'SET_GAMEROUND_RESULTS',\n        data: results,\n    }\n}\n\nexport const endGame = () => {\n    return {\n        type: 'END_GAME',\n        data: { isOn: false },\n    }\n}\n\n\nexport default gameReducer\n\n","import { combineReducers } from 'redux'\nimport gameReducer from './gameReducer'\n\nconst rootReducer = combineReducers({\n    game: gameReducer,\n})\n\nexport default rootReducer\n\n\n","import React from 'react'\nimport { View, Text } from 'react-native'\n\nconst CardFront = ({ card }) => {\n\n    let color = 'black'\n    let char = ''\n    switch (card.suit) {\n    case 2:\n        char = '♥'\n        color = 'red'\n        break\n    case 3:\n        char = '♣'\n        break\n    case 4:\n        char = '♦'\n        color = 'red'\n        break\n    default:\n        char = '♠'\n        break\n    }\n\n    const cardText = card.value === 1 ? 'A' : card.value\n\n    return (\n        <View  style={{ justifyContent: 'center', alignItems: 'center' }}>\n            <Text style={{ color: color, fontSize: 30 }}>{char}</Text>\n            <Text style={{ color: color, fontSize: 30 }}>{cardText}</Text>\n        </View>\n    )\n}\n\n\nexport default CardFront\n\n\n","import React from 'react'\nimport { View, Text } from 'react-native'\n\nconst CardBack = ({ scaleUnit }) => {\n\n    const viewStyle = {\n        justifyContent: 'center',\n        alignItems: 'center',\n        backgroundColor: '#B9CC3F',\n        width: scaleUnit,\n        height: scaleUnit * 1.7,\n        borderRadius: 6,\n    }\n\n    const displayCards = () => {\n        let rows = []\n        for (let i = 0; i < 9 ; i++) {\n            rows.push(<Text key={i} style={{ color: 'green', fontSize: scaleUnit / 7 }}>©©©©©©©</Text>)\n        }\n        return rows\n    }\n\n    return (\n        <View  style={viewStyle}>\n            {displayCards()}\n        </View>\n    )\n}\n\nexport default CardBack\n\n","import React, { useImperativeHandle } from 'react'\nimport { View, Animated } from 'react-native'\nimport CardFront from './CardFront'\nimport CardBack from './CardBack'\n\n\nconst FlippableCard = React.forwardRef((props, ref) => {\n\n    const cardStyle = getCardStyle(props.unitsAndLocations.unit)\n\n    let animatedFlipBacksideValue = new Animated.Value(0)\n    const interpolatedFlipBackside = animatedFlipBacksideValue.interpolate({\n        inputRange: [0, 180], outputRange: ['180deg', '360deg'],\n    })\n    const animatedFlipBacksideStyle = { transform: [ { rotateX: interpolatedFlipBackside } ] }\n\n    let animatedFlipFrontsideValue = new Animated.Value(90)\n    const interpolatedFlipFrontside = animatedFlipFrontsideValue.interpolate({\n        inputRange: [0, 180], outputRange: ['180deg', '360deg'],\n    })\n    const animatedFlipFrontsideStyle = { transform: [ { rotateX: interpolatedFlipFrontside } ] }\n\n    const flip = (flipDuration) => {\n        performFlipAnimations(animatedFlipBacksideValue, animatedFlipFrontsideValue, flipDuration)\n    }\n\n    useImperativeHandle(ref, () => {\n        return { flip }\n    })\n\n    return (\n        <View>\n            <Animated.View style={[cardStyle, { position: 'absolute', left: 0 }, animatedFlipBacksideStyle]}>\n                <CardBack scaleUnit={props.unitsAndLocations.unit}/>\n            </Animated.View>\n            <Animated.View style={[cardStyle, animatedFlipFrontsideStyle]}>\n                <CardFront card={props.card}/>\n            </Animated.View>\n        </View>\n    )\n})\n\nexport default FlippableCard\n\n\n\n// HELPER FUNCTIONS FOR THE COMPONENT FlippableCard\n\nconst getCardStyle = (unit) => {\n    return {\n        width: unit,\n        height: unit * 1.7,\n        borderRadius: 7,\n        backgroundColor: 'papayawhip',\n    }\n}\n\nconst performFlipAnimations = (animatedFlipBacksideValue, animatedFlipFrontsideValue, flipDuration) => {\n    Animated.sequence([\n        Animated.timing(animatedFlipBacksideValue, {\n            toValue: 90, tension: 10, friction: 10, duration: flipDuration / 2,\n        }),\n        Animated.timing(animatedFlipFrontsideValue, {\n            toValue: 180, tension: 10, friction: 10, duration: flipDuration / 2,\n        }),\n    ]).start()\n}\n\n","import React, { useImperativeHandle, useState } from 'react'\nimport { Animated } from 'react-native'\nimport FlippableCard from '../cards/FlippableCard'\n\n\nconst MovableFlippableCard = React.forwardRef((props, ref) => {\n\n    const [animatedMove] = useState(new Animated.ValueXY())\n    const animatedMoveStyle = { transform: [ { translateX: animatedMove.x }, { translateY: animatedMove.y } ] }\n    const [startLocation] = useState(props.startLocation)\n    const referenceFlip = React.createRef()\n\n    const flipOnly = (flipDurationDealing) => {\n        referenceFlip.current.flip(flipDurationDealing)\n    }\n\n    const moveAndPossiblyFlipWithDelay = (moveDurationDealing, flipDurationDealing) => {\n        const delay = props.index > 14 ? 0 : 500 * props.index\n        moveToNewLocation(animatedMove, startLocation, delay, props.endLocation, moveDurationDealing)\n        if (props.flip) {\n            setTimeout(() => {\n                flipOnly(flipDurationDealing)\n            }, delay + moveDurationDealing)\n        }\n    }\n\n    const moveCardToLocation = (location, duration) => {\n        moveToNewLocation(animatedMove, startLocation, 0, location, duration)\n    }\n\n    useImperativeHandle(ref, () => {\n        return { moveAndPossiblyFlipWithDelay, flipOnly, moveCardToLocation }\n    })\n\n    return (\n        <Animated.View style={[animatedMoveStyle, { position: 'absolute', left: startLocation.x, top: startLocation.y }]}>\n            <FlippableCard\n                ref={referenceFlip}\n                index={props.index}\n                card={props.card}\n                convertCardState={props.convertCardState}\n                unitsAndLocations={props.unitsAndLocations}\n            />\n        </Animated.View>\n    )\n})\n\nexport default MovableFlippableCard\n\n\n// HELPER FUNCTIONS FOR THE COMPONENT MovableFlippableCard\n\nconst moveToNewLocation = (animatedMove, startLocation, delay, newLocation, moveDuration) => {\n    Animated.sequence([\n        Animated.delay(delay),\n        Animated.timing(animatedMove, {\n            toValue: { x: newLocation.x - startLocation.x, y: newLocation.y - startLocation.y }, duration: moveDuration,\n        }),\n    ]).start()\n}\n\n\n\n","\nexport const getPlayerCardStartLocation = (scalingUnit, spacing) => {\n    const positionX = spacing + (1/6 + 1 + 4/6 + 1 + 2/6 + 1 + 4/6) * scalingUnit\n    const positionY = (0.5 + 1.5 + 0.75) * 1.7 * scalingUnit\n    return { x: positionX, y: positionY }\n}\n\nexport const getCardFlipStateAfterDealing = (cardIndex, cardCount) => {\n    let flip = false\n    switch (cardIndex) {\n    case 0: case 5: case 9: case 12: case 14:\n        flip = true\n        break\n    case 1: case 2: case 3: case 4:\n        if (cardIndex + 4 >= cardCount) {\n            flip = true\n        }\n        break\n    case 6: case 7: case 8:\n        if (cardIndex + 3 >= cardCount) {\n            flip = true\n        }\n        break\n    case 10: case 11:\n        if (cardIndex + 2 >= cardCount) {\n            flip = true\n        }\n        break\n    case 13:\n        if (cardIndex + 1 >= cardCount) {\n            flip = true\n        }\n        break\n    default:\n        break\n    }\n    if (cardIndex > 14) {\n        flip = true\n    }\n    return flip\n}\n\n\n\n\n\n\nconst getPlayerCardSolitaireLocation = (cardIndex, scalingUnit, spacing) => {\n\n    const unitHeight = 1.7 * scalingUnit\n    const origoY =  (0.5 + 1.5 + 0.75 + 1.0 + 0.75) * unitHeight\n\n    let positionX\n    switch (cardIndex) {\n    case 0:\n        positionX = spacing + 1 / 6 * scalingUnit\n        break\n    case 1: case 5:\n        positionX = spacing + (2 / 6  + 1)* scalingUnit\n        break\n    case 2: case 6: case 9:\n        positionX = spacing +  (3 / 6 + 2) * scalingUnit\n        break\n    case 3: case 7: case 10: case 12:\n        positionX = spacing +  (4 / 6 + 3) * scalingUnit\n        break\n    default:\n        positionX = spacing +  (5 / 6 + 4) * scalingUnit\n    }\n\n    let positionY\n    switch (cardIndex) {\n    case 14:\n        positionY = origoY + (4 * 0.125) * unitHeight\n        break\n    case 12: case 13:\n        positionY = origoY + (3 * 0.125) * unitHeight\n        break\n    case 9: case 10: case 11:\n        positionY = origoY + (2 * 0.125) * unitHeight\n        break\n    case 5: case 6: case 7: case 8:\n        positionY = origoY + (1 * 0.125) * unitHeight\n        break\n    default:\n        positionY = origoY\n    }\n\n    return { x: positionX, y: positionY }\n}\n\nexport const whatStackWasReleasedOn = (releaseX, releaseY, scaleUnit, spacing) => {\n    const wasReleasedOnLeft = wasReleasedOnLeftStack(releaseX, releaseY, scaleUnit, spacing)\n    const wasReleasedOnRight = wasReleasedOnRightStack(releaseX, releaseY, scaleUnit, spacing)\n    if (wasReleasedOnLeft) {\n        return 'left'\n    } else if (wasReleasedOnRight) {\n        return 'right'\n    } else {\n        return 'none'\n    }\n}\n\nconst wasReleasedOnRightStack = (releaseX, releaseY, scaleUnit, spacing) => {\n    const gamingStackRightX = spacing + (1/6 + 1 + 4/6 + 1 + 2/6) * scaleUnit\n    const gamingStackRightY = (0.5 + 1.5 + 0.75) * scaleUnit * 1.7\n    if (!(releaseX > gamingStackRightX && releaseX < gamingStackRightX + scaleUnit)) {\n        return false\n    }\n    if (!(releaseY > gamingStackRightY && releaseY < gamingStackRightY + scaleUnit * 1.7)) {\n        return false\n    }\n    return true\n}\n\nconst wasReleasedOnLeftStack = (releaseX, releaseY, scaleUnit, spacing) => {\n    const gamingStackLeftX = spacing + (1/6 + 1 + 4/6) * scaleUnit\n    const gamingStackLeftY = (0.5 + 1.5 + 0.75) * scaleUnit * 1.7\n    if (!(releaseX > gamingStackLeftX && releaseX < gamingStackLeftX + scaleUnit)) {\n        return false\n    }\n    if (!(releaseY > gamingStackLeftY && releaseY < gamingStackLeftY + scaleUnit * 1.7)) {\n        return false\n    }\n    return true\n}\n\n\nexport const valueIsOKforPlacingOntoStack = (whatStack, topmostLeft, topmostRight, newCard) => {\n    const currentTopmostValue = whatStack === 'left' ? topmostLeft.value : topmostRight.value\n    const newValue = newCard.value\n    if (currentTopmostValue === 1) {\n        if (newValue === 2 || newValue === 13) {\n            return true\n        }\n    } else if (currentTopmostValue === 13) {\n        if (newValue === 12 || newValue === 1) {\n            return true\n        }\n    } else {\n        if (newValue === currentTopmostValue + 1 || newValue === currentTopmostValue - 1) {\n            return true\n        } else {\n            return false\n        }\n    }\n}\n\nexport const getIndexOfPossibleCardBelow = (cardIndex) => {\n    const onTopAndBelowCardIndexPairs = new Map([\n        [14, 13],\n        [13, 11],\n        [12, 10],\n        [11, 8],\n        [10, 7],\n        [9, 6],\n        [8, 4],\n        [7, 3],\n        [6, 2],\n        [5, 1],\n        ['default', -1],\n    ])\n    return onTopAndBelowCardIndexPairs.get(cardIndex) || onTopAndBelowCardIndexPairs.get('default')\n}\n\n\n\nexport const whatEmptyPositionWasReleasedOn = (releaseX, releaseY, scaleUnit, spacing, occupancyData) => {\n    const emptyPositionsX = []\n    for (let i = 0; i < 5; i++) {\n        emptyPositionsX.push(spacing + (1/6 + i * (1 + 1/6)) * scaleUnit)\n    }\n    const emptyPositionsY = (0.5 + 1.5 + 0.75 + 1 + 0.75) * 1.7 * scaleUnit\n    let emptyPosition = 'none'\n    for (let i = 0; i < 5; i++) {\n        const indexOfCardAtPosition = occupancyData[i]\n        if (indexOfCardAtPosition === -1) {\n            if ((releaseX > emptyPositionsX[i] && releaseX < emptyPositionsX[i] + scaleUnit)) {\n                if ((releaseY > emptyPositionsY && releaseY < emptyPositionsY + scaleUnit * 1.7)) {\n                    emptyPosition = i\n                }\n            }\n        }\n    }\n    return emptyPosition\n}\n\n\nexport const getComputerCardStartLocation = (scalingUnit, spacing) => {\n    const positionX = spacing + (1/6) * scalingUnit\n    const positionY = (0.5 + 1.5 + 0.75) * 1.7 * scalingUnit\n    return { x: positionX, y: positionY }\n}\n\n\nexport const getPlayerCardLocationAfterDealing = (cardIndex, scalingUnit, spacing, cardCount) => {\n    if (cardIndex < 15) {\n        return getPlayerCardSolitaireLocation(cardIndex, scalingUnit, spacing)\n    } else {\n        return getLeftOrRightStackXY(scalingUnit, spacing, 'right', cardIndex, cardCount)\n    }\n}\n\nexport const getComputerCardLocationAfterDealing = (cardIndex, scalingUnit, spacing, cardCount) => {\n    if (cardIndex < 15) {\n        return getComputerCardSolitaireLocation(cardIndex, scalingUnit, spacing)\n    } else {\n        return getLeftOrRightStackXY(scalingUnit, spacing, 'left', cardIndex, cardCount)\n    }\n}\n\nconst getLeftOrRightStackXY = (scalingUnit, spacing, side, cardIndex, cardCount) => {\n    const positionY = (0.5 + 1.5 + 0.75) * 1.7 * scalingUnit\n    const toLeftOrRightStack = toLeftOrRightGameStackInSingleCardDealing(side, cardIndex, cardCount)\n    if (toLeftOrRightStack === 'right') {\n        const rightPackPositionX = spacing + (1/6 + 1 + 4/6 + 1 + 2/6) * scalingUnit\n        return { x: rightPackPositionX, y: positionY }\n    } else {\n        const leftPackPositionX = spacing + (1/6 + 1 + 4/6) * scalingUnit\n        return { x: leftPackPositionX, y: positionY }\n    }\n}\n\nexport const toLeftOrRightGameStackInSingleCardDealing = (side, cardIndex, cardCount) => {\n    const countOfThisPlayerCardsToDealTogether = cardCount - 15 > 0 ? cardCount - 15 : 0\n    const opponentCardCount = 52 - cardCount\n    const countOfOpponentCardsToDealTogether = opponentCardCount - 15 > 0 ? opponentCardCount - 15 : 0\n    const numberOfDealingsDoneTogether = Math.min(countOfThisPlayerCardsToDealTogether, countOfOpponentCardsToDealTogether)\n    if (cardIndex < 15 + numberOfDealingsDoneTogether) {\n        return side\n    } else {\n        if (cardCount % 2 === 0 && cardIndex % 2 === 0) {\n            return side\n        } else if (cardCount % 2 !== 0 && cardIndex % 2 !== 0) {\n            return side\n        } else {\n            return side === 'right' ? 'left' : 'right'\n        }\n    }\n}\n\n\nexport const getComputerCardSolitaireLocation = (cardIndex, scalingUnit, spacing) => {\n    const unitHeight = 1.7 * scalingUnit\n    const origoY =  0.5 * unitHeight\n\n    let positionX = spacing\n    switch (cardIndex) {\n    case 14: case 13: case 11: case 8: case 4:\n        positionX += 1 / 6 * scalingUnit\n        break\n    case 12: case 10: case 7: case 3:\n        positionX += (2 / 6  + 1)* scalingUnit\n        break\n    case 9: case 6: case 2:\n        positionX +=  (3 / 6 + 2) * scalingUnit\n        break\n    case 5: case 1:\n        positionX +=  (4 / 6 + 3) * scalingUnit\n        break\n    default:\n        positionX +=  (5 / 6 + 4) * scalingUnit\n    }\n\n    let positionY = 0\n    switch (cardIndex) {\n    case 4: case 3: case 2: case 1: case 0:\n        positionY = origoY + (4 * 0.125) * unitHeight\n        break\n    case 8: case 7: case 6: case 5:\n        positionY = origoY + (3 * 0.125) * unitHeight\n        break\n    case 11: case 10: case 9:\n        positionY = origoY + (2 * 0.125) * unitHeight\n        break\n    case 13: case 12:\n        positionY = origoY + (1 * 0.125) * unitHeight\n        break\n    default:\n        positionY = origoY\n    }\n    return { x: positionX, y: positionY }\n}\n\n\n\nexport const getIndexOfCardToMoveAndTargetStack = (computerCards, occupancyData, topmostLeft, topmostRight) => {\n    let visibleCardIndexes = []\n    const sets = [[0], [5,1], [9,6,2], [12,10,7,3], [14,13,11,8,4]]\n    let i = 0\n    while (i < 5) {\n        let j = 0\n        let look = true\n        while (look && j < sets[i].length) {\n            if (sets[i][j] < computerCards.length) {\n                const indexOfCardAtThisPosition = occupancyData[sets[i][j]]\n                if (indexOfCardAtThisPosition !== -1) {\n                    visibleCardIndexes.push(indexOfCardAtThisPosition)\n                    look = false\n                }\n            }\n            j++\n        }\n        i++\n    }\n\n    let cardAndTarget = { cardIndex: -1, stack: 'none' }\n    let k = 0\n    while (k < visibleCardIndexes.length) {\n        let visibleCard = computerCards[visibleCardIndexes[k]]\n        const leftOK =  valueIsOKforPlacingOntoStack('left', topmostLeft, topmostRight, visibleCard)\n        const rightOK =  valueIsOKforPlacingOntoStack('right', topmostLeft, topmostRight, visibleCard)\n        if (leftOK) {\n            cardAndTarget = { cardIndex: visibleCardIndexes[k], target: 'left' }\n            k = 100\n        } else if (rightOK) {\n            cardAndTarget = { cardIndex: visibleCardIndexes[k], target: 'right' }\n            k = 100\n        }\n        k++\n    }\n    return cardAndTarget\n}\n\nexport const getTargetPackLocation = (stack, scaleUnit, spacing) => {\n    const locations = new Map([\n        ['left', { x: spacing +(1/6 + 1 + 4/6) * scaleUnit, y: (0.5 + 1.5 + 0.75) * 1.7 * scaleUnit }],\n        ['right', { x: spacing + (1/6 + 1 + 4/6 + 1 + 2/6) * scaleUnit, y: (0.5 + 1.5 + 0.75) * 1.7 * scaleUnit }],\n    ])\n    return locations.get(stack)\n}\n\n\nexport const getCardStatesAtStart = (cardCount) => {\n    let cardStates = []\n    for (let i = 0; i < cardCount; i++) {\n        cardStates.push('movable')\n    }\n    return cardStates\n}\n\n\nexport const getOccupancyDataAfterFirstDealingCards = (cardCount) => {\n    let occupancies = []\n    const number = Math.min(15, cardCount)\n    for (let i = 0; i < number; i++) {\n        occupancies.push(i)\n    }\n    return occupancies\n}\n\n\nexport const isThereAPositionBelow = (cardIndex, occupancyData) => {\n    let position\n    for (let i = 0; i < occupancyData.length; i++) {\n        if (occupancyData[i] === cardIndex) {\n            position = i\n        }\n    }\n    if (position < 5) {\n        return false\n    } else {\n        return true\n    }\n}\n\nexport const getPlacementValidity = (card, targetStack, topmostStuff) => {\n    if (targetStack === 'left') {\n        return valueIsOKforPlacingOntoStack('left', topmostStuff.valueLeft, topmostStuff.valueRight, card)\n    } else {\n        return valueIsOKforPlacingOntoStack('right', topmostStuff.valueLeft, topmostStuff.valueRight, card)\n    }\n}\n\nexport const handleCardStateChanges = (cardsAndNewStates, cardStates, setCardStates) => {\n    const updatedCardStates = [...cardStates]\n    for (let i = 0; i < cardsAndNewStates.length; i++) {\n        updatedCardStates[cardsAndNewStates[i].index] = cardsAndNewStates[i].newState\n    }\n    setCardStates(updatedCardStates)\n}\n\nexport const handleOccupancyDataChanges = (cardIndex, action, positionToOccupy, occupancyData, setOccupancyData) => {\n    let updatedOccupancyData = [...occupancyData]\n    let locationToFree\n    for (let j = 0; j < updatedOccupancyData.length; j++) {\n        if (updatedOccupancyData[j] === cardIndex) {\n            locationToFree = j\n        }\n    }\n    updatedOccupancyData[locationToFree] = -1\n    if (action === 'occupy') {\n        updatedOccupancyData[positionToOccupy] = cardIndex\n    }\n    setOccupancyData(updatedOccupancyData)\n}\n\nexport const handleEmptyMoveOccupancyDataChanges = (cardMovedIndex, positionToOccupy, occupancyData, setOccupancyData) => {\n    let updatedOccupancyData = [...occupancyData]\n    let locationToFree\n    for (let j = 0; j < updatedOccupancyData.length; j++) {\n        if (updatedOccupancyData[j] === cardMovedIndex) {\n            locationToFree = j\n        }\n    }\n    updatedOccupancyData[locationToFree] = -1\n    updatedOccupancyData[positionToOccupy] = cardMovedIndex\n    setOccupancyData(updatedOccupancyData)\n}\n\nexport const getCurrentPosition = (cardIndex, occupancyData) => {\n    let position\n    for (let i = 0; i < occupancyData.length; i++) {\n        if (occupancyData[i] === cardIndex) {\n            position = i\n        }\n    }\n    return position\n}\n\nexport const updateGameStackTopmostCard = (side, topmostStuff, card) => {\n    if (side === 'left') {\n        topmostStuff.changeLeft(card)\n    } else {\n        topmostStuff.changeRight(card)\n    }\n}\n\n\nexport const getEmptyPositionAndCardToMoveThere = (occupancyData, cards) => {\n    let firstEmptyPosition = -1\n    let keepLooking = true\n    for (let i = 0; i < occupancyData.length && keepLooking; i++) {\n        if (occupancyData[i] === -1) {\n            firstEmptyPosition = i\n            keepLooking = false\n        }\n    }\n    const visibleCardToMoveIndex = getVisibleCardToMoveIndex(occupancyData, cards)\n    return { emptyPosition: firstEmptyPosition, cardToMoveIndex: visibleCardToMoveIndex }\n}\n\nconst getVisibleCardToMoveIndex = (occupancies, cards) => {\n    let visibleCardIndex = -1\n    const sets = [[5], [9,6], [12,10,7], [14,13,11,8]]\n    let i = 0\n    while (i < 4) {\n        let j = 0\n        let look = true\n        while (look && j < sets[i].length) {\n            if (sets[i][j] < cards.length) {\n                const indexOfCardAtThisPosition = occupancies[sets[i][j]]\n                if (indexOfCardAtThisPosition !== -1) {\n                    visibleCardIndex = indexOfCardAtThisPosition\n                    look = false\n                }\n            }\n            j++\n        }\n        i++\n    }\n    return visibleCardIndex\n}\n","import React, { useState } from 'react'\nimport { Animated, PanResponder, TouchableOpacity } from 'react-native'\nimport CardFront from './CardFront'\nimport { whatStackWasReleasedOn, valueIsOKforPlacingOntoStack, whatEmptyPositionWasReleasedOn } from '../game/helperFunctions.js'\n\n\n\nconst DraggableCard = React.forwardRef((props, ref) => {\n\n    const cardStyle = getCardStyle(props.unitsAndLocations.unit)\n    const [startLocation] = useState(props.startLocation)\n    const [animatedDraggable] = useState(new Animated.ValueXY())\n    const dragStyle = { transform: [ { translateX: animatedDraggable.x }, { translateY: animatedDraggable.y }] }\n    const [updatedLocation, setUpdatedLocation] = useState({ x: 0, y: 0 })\n    const [timing] = useState(props.unitsAndLocations.timing)\n\n    const handleReleasedCardSomewhere = (releaseX, releaseY) => {\n        const wasReleasedOnStackAndMoveFinalized = cardReleasedOnStackAndValueSuitableAndMoveFinalized(releaseX, releaseY,\n            props.unitsAndLocations, props.topmostStuff, props.card, startLocation, animatedDraggable,\n            props.handleChangesAfterPlayingACard, props.index, timing)\n        if (!wasReleasedOnStackAndMoveFinalized) {\n            const wasReleasedOnEmptyPositionAndMoveFinalized = cardReleasedOnEmptyPositionAndMoveFinalized(releaseX, releaseY,\n                props.unitsAndLocations, props.occupancyData, animatedDraggable, startLocation, setUpdatedLocation,\n                props.handleMovedCardToEmptyPosition, props.index, timing)\n            if (!wasReleasedOnEmptyPositionAndMoveFinalized) {\n                returnCardToStartDragPosition(animatedDraggable, updatedLocation, timing)\n            }\n        }\n    }\n\n    const panResponder = PanResponder.create({\n        onStartShouldSetPanResponder: (evt, gestureState) => true,\n        onPanResponderMove: (event, gestureState) => {\n            moveCardAlongDrag(gestureState.dx, gestureState.dy, animatedDraggable, updatedLocation)\n        },\n        onPanResponderRelease: (evt, gestureState) => {\n            handleReleasedCardSomewhere(gestureState.moveX, gestureState.moveY)\n        },\n    })\n\n    return (\n        <TouchableOpacity  disabled={false}>\n            <Animated.View style={[cardStyle, dragStyle, { position: 'absolute', left: startLocation.x, top: startLocation.y }]} {...panResponder.panHandlers} >\n                <CardFront card={props.card}/>\n            </Animated.View>\n        </TouchableOpacity>\n    )\n})\n\nexport default DraggableCard\n\n\n\n// SOME HELPER FUNCTIONS for the component DraggableCard\n\nconst getCardStyle = (size) => {\n    return {\n        width: size,\n        height: size * 1.7,\n        borderRadius: 7,\n        backgroundColor: 'papayawhip',\n    }\n}\n\nconst returnCardToStartDragPosition = (animatedDraggable, updatedLocation, timing) => {\n    const duration = timing.moveDurationComputerCardGaming\n    Animated.timing(animatedDraggable, {\n        toValue: {  x: 0 - updatedLocation.x, y: 0 - updatedLocation.y  }, duration: duration,\n    }).start()\n}\n\nconst moveCardAlongDrag = (dx, dy, animatedDraggable, updatedLocation) => {\n    Animated.timing(animatedDraggable, {\n        toValue: { x: dx - updatedLocation.x, y: dy - updatedLocation.y }, duration: 0,\n    }).start()\n}\n\nconst moveToNewPosition = (animatedDraggable, newPosition, oldPosition, duration) => {\n    Animated.timing(animatedDraggable, {\n        toValue: { x: newPosition.x - oldPosition.x, y: newPosition.y - oldPosition.y }, duration: duration,\n    }).start()\n}\n\nconst moveCardToGameStack = (animatedDraggable, side, scaleUnit, spacing, startLocation, duration) => {\n    const newX =  side === 'left' ? (spacing + (1/6 + 1 + 4/6) * scaleUnit) : (spacing + (1/6 + 1 + 4/6 + 1 + 2/6) * scaleUnit)\n    const newY = (0.5 + 1.5 + 0.75) * 1.7 * scaleUnit\n    moveToNewPosition(animatedDraggable, { x: newX, y: newY }, startLocation, duration )\n}\n\nconst moveCardToEmptyPosition = (animatedDraggable, positionIndex, scaleUnit, spacing, startLocation, duration) => {\n    const newX = spacing + (1/6 + positionIndex * (1 + 1/6)) * scaleUnit\n    const newY = (0.5 + 1.5 + 0.75 + 1 + 0.75) * 1.7 * scaleUnit\n    moveToNewPosition(animatedDraggable, { x: newX, y: newY }, startLocation, duration)\n}\n\nconst cardReleasedOnStackAndValueSuitableAndMoveFinalized = (releaseX, releaseY, unitsAndLocations, topmostStuff, card, startLocation, animatedDraggable, handleChangesAfterPlayingACard, index, timing) => {\n    const unit = unitsAndLocations.unit\n    const spacing = unitsAndLocations.spacing\n    const topmostLeft = topmostStuff.valueLeft\n    const topmostRight = topmostStuff.valueRight\n    const whatStackCardWasReleasedOn = whatStackWasReleasedOn(releaseX, releaseY, unit, spacing)\n    const duration = timing.movementFinalization\n    if (whatStackCardWasReleasedOn !== 'none') {\n        const valueIsOK = valueIsOKforPlacingOntoStack(whatStackCardWasReleasedOn, topmostLeft, topmostRight, card)\n        if (valueIsOK) {\n            moveCardToGameStack(animatedDraggable, whatStackCardWasReleasedOn, unit, spacing, startLocation, duration)\n            setTimeout(() => {\n                handleChangesAfterPlayingACard(index, whatStackCardWasReleasedOn)\n            }, duration)\n            return true\n        }\n        return false\n    }\n}\n\nconst cardReleasedOnEmptyPositionAndMoveFinalized = (releaseX, releaseY, unitsAndLocations, occupancyData, animatedDraggable, startLocation, setUpdatedLocation, handleMovedCardToEmptyPosition, index, timing) => {\n    const unit = unitsAndLocations.unit\n    const spacing = unitsAndLocations.spacing\n    const whatEmptyPositionTheCardWasReleasedOn = whatEmptyPositionWasReleasedOn(releaseX, releaseY, unit, spacing, occupancyData)\n    const duration = timing.movementFinalization\n    if (whatEmptyPositionTheCardWasReleasedOn !== 'none') {\n        moveCardToEmptyPosition(animatedDraggable, whatEmptyPositionTheCardWasReleasedOn, unit, spacing, startLocation, duration)\n        setTimeout(() => {\n            setUpdatedLocation({\n                x: (startLocation.x - (spacing + (1/6 + whatEmptyPositionTheCardWasReleasedOn * (1 + 1/6)) * unit)),\n                y: (startLocation.y - ((0.5 + 1.5 + 0.75 + 1 + 0.75) * 1.7 * unit)),\n            })\n            handleMovedCardToEmptyPosition(index, whatEmptyPositionTheCardWasReleasedOn)\n        }, duration)\n        return true\n    }\n    return false\n}\n\n\n\n","import React, { useState } from 'react'\nimport MovableFlippableCard from '../cards/MovableFlippableCard'\nimport DraggableCard from '../cards/DraggableCard'\nimport { getPlayerCardLocationAfterDealing, getPlayerCardStartLocation, getCardFlipStateAfterDealing } from './helperFunctions.js'\n\n\nconst ControllablePlayerCard = React.forwardRef((props, ref) => {\n\n    const [locationAtStart] = useState(getPlayerCardStartLocation(props.unitsAndLocations.unit, props.unitsAndLocations.spacing))\n    const [locationAfterDealing] = useState(getPlayerCardLocationAfterDealing(props.index, props.unitsAndLocations.unit, props.unitsAndLocations.spacing, props.cardCount))\n    const [cardWillFlipAfterDealing] = useState(getCardFlipStateAfterDealing(props.index, props.cardCount))\n\n\n    if (props.cardState === 'null') {\n        return null\n    } else if (props.cardState === 'draggable') {\n        return (\n            <DraggableCard\n                card={props.card}\n                ref={ref}\n                index={props.index}\n                startLocation={locationAfterDealing}\n                unitsAndLocations={props.unitsAndLocations}\n                topmostStuff={props.topmostStuff}\n                handleChangesAfterPlayingACard={props.handleChangesAfterPlayingACard}\n                handleMovedCardToEmptyPosition={props.handleMovedCardToEmptyPosition}\n                occupancyData={props.occupancyData}\n            />\n        )\n    } else {\n        return (\n            <MovableFlippableCard\n                ref={ref}\n                index={props.index}\n                startLocation={locationAtStart}\n                card={props.card}\n                endLocation={locationAfterDealing}\n                flip={cardWillFlipAfterDealing}\n                unitsAndLocations={props.unitsAndLocations}\n            />\n        )\n    }\n})\n\nexport default ControllablePlayerCard\n\n","import React, { useState, useImperativeHandle, useEffect } from 'react'\nimport { View } from 'react-native'\nimport ControllablePlayerCard from './ControllablePlayerCard'\nimport { toLeftOrRightGameStackInSingleCardDealing,\n    getIndexOfPossibleCardBelow,\n    getCardStatesAtStart,\n    getCardFlipStateAfterDealing,\n    getOccupancyDataAfterFirstDealingCards,\n    isThereAPositionBelow,\n    handleCardStateChanges,\n    handleOccupancyDataChanges,\n    getCurrentPosition,\n    updateGameStackTopmostCard,\n} from './helperFunctions.js'\n\n\nconst PlayerCards = React.forwardRef((props, ref) => {\n\n    const [playerCards] = useState(props.playerCards)\n    const [cardReferences] = useState(playerCards.map(card => React.createRef()))\n    const [indexDealNext, setIndexDealNext] = useState(props.playerCards.length > 15 ? 15 : 100)\n    const [cardStates, setCardStates] = useState(getCardStatesAtStart(props.playerCards.length))\n    const [occupancyData, setOccupancyData] = useState(getOccupancyDataAfterFirstDealingCards(props.playerCards.length))\n    const timing = props.unitsAndLocations.timing\n\n    const dealSolitaireCards = () => {\n        const limit = Math.min(playerCards.length, 15)\n        for (let i = 0; i < limit; i++) {\n            cardReferences[i].current.moveAndPossiblyFlipWithDelay(timing.moveDurationDealing, timing.flipDurationDealing)\n        }\n        setTimeout(() => {\n            updateCardStatesAfterSolitaireDealing(cardStates, setCardStates)\n        }, (timing.moveDurationDealing + timing.flipDurationDealing) + 500 * limit)\n    }\n\n    const dealSingleCard = () => {\n        if (indexDealNext < props.playerCards.length) {\n            cardReferences[indexDealNext].current.moveAndPossiblyFlipWithDelay(timing.moveDurationDealing, timing.flipDurationDealing)\n            setTimeout(() => {\n                const toWhichStack = toLeftOrRightGameStackInSingleCardDealing(indexDealNext, playerCards.length)\n                updateGameStackTopmostCard(toWhichStack, props.topmostStuff, playerCards[indexDealNext])\n                handleCardStateChanges([{ index: indexDealNext, newState: 'null' }], cardStates, setCardStates)\n                setIndexDealNext(indexDealNext + 1)\n            }, timing.moveDurationDealing + timing.flipDurationDealing)\n        }\n    }\n\n    const handleChangesAfterPlayingACard = (cardIndex, gamingStack) => {\n        const currentPosition = getCurrentPosition(cardIndex, occupancyData)\n        updateGameStackTopmostCard(gamingStack, props.topmostStuff, playerCards[cardIndex])\n        handleCardStateChanges([{ index: cardIndex, newState: 'null' }], cardStates, setCardStates)\n        handleOccupancyDataChanges(cardIndex, 'vacate', 'none', occupancyData, setOccupancyData)\n        const indexOfCardBelow = getIndexOfPossibleCardBelow(cardIndex)\n        if (currentPosition > 4 && indexOfCardBelow !== -1) {\n            cardReferences[indexOfCardBelow].current.flipOnly(timing.flipDurationGaming)\n            setTimeout(() => {\n                handleCardStateChanges([{ index: cardIndex, newState: 'null' }, { index: indexOfCardBelow, newState: 'draggable' }], cardStates, setCardStates)\n            }, timing.flipDurationGaming)\n        }\n    }\n\n    const handleMovedCardToEmptyPosition = (cardIndex, emptyPositionIndex) => {\n        handleOccupancyDataChanges(cardIndex, 'occupy', emptyPositionIndex, occupancyData, setOccupancyData)\n        const isTherePositioBelow = isThereAPositionBelow(cardIndex, occupancyData)\n        if (isTherePositioBelow) {\n            const indexOfCardBelow = getIndexOfPossibleCardBelow(cardIndex)\n            if (indexOfCardBelow !== -1) {\n                cardReferences[indexOfCardBelow].current.flipOnly(timing.flipDurationGaming)\n                setTimeout(() => {\n                    handleCardStateChanges([{ index: cardIndex, newState: 'draggable' }, { index: indexOfCardBelow, newState: 'draggable' }], cardStates, setCardStates)\n                }, timing.flipDurationGaming)\n            }\n        }\n    }\n\n    const returnOccupancyData = () => {\n        return occupancyData\n    }\n    const returnGameRoundOverStateData = () => {\n        return {\n            occupancyData: occupancyData,\n            indexDealNext: indexDealNext,\n        }\n    }\n    const returnTopmostValues = () => {\n        return { left: props.topmostStuff.valueLeft.value, right: props.topmostStuff.valueRight.value }\n    }\n\n    useImperativeHandle(ref, () => {\n        return { dealSolitaireCards, dealSingleCard, returnOccupancyData, returnTopmostValues, returnGameRoundOverStateData }\n    })\n\n    useEffect(() => {\n        const playerSolitaireCardsAreAllPlayed = occupancyData.every(position => position === -1)\n        if (playerSolitaireCardsAreAllPlayed) {\n            props.endRound('player')\n        }\n    },[occupancyData, props])\n\n\n    return (\n        <View>\n            {playerCards.map((card, index) => {\n                return (\n                    <ControllablePlayerCard\n                        key={index}\n                        index={index}\n                        card={card}\n                        ref={cardReferences[index]}\n                        cardCount={playerCards.length}\n                        unitsAndLocations={props.unitsAndLocations}\n                        topmostStuff={props.topmostStuff}\n                        cardState={cardStates[index]}\n                        handleChangesAfterPlayingACard={handleChangesAfterPlayingACard}\n                        handleMovedCardToEmptyPosition={handleMovedCardToEmptyPosition}\n                        occupancyData={occupancyData}\n                    />\n                )\n            })}\n        </View>\n    )\n})\n\n\nexport default PlayerCards\n\n\n// HELPER FUNCTIONS FOR COMPONENT PlayerCards\n\nconst updateCardStatesAfterSolitaireDealing = (cardStates, setCardStates) => {\n    const updatedCardStates = [...cardStates]\n    const number = Math.min(cardStates.length, 15)\n    for (let i = 0; i < number; i++) {\n        const willFlipAfterDealing = getCardFlipStateAfterDealing(i, cardStates.length)\n        if (willFlipAfterDealing) {\n            updatedCardStates[i] = 'draggable'\n        }\n    }\n    setCardStates(updatedCardStates)\n}\n\n\n\n\n\n\n\n\n\n","import React from 'react'\nimport { View } from 'react-native'\nimport CardFront from '../cards/CardFront'\n\n\nconst getCardViewStyle = (side, unitsAndLocations) => {\n    let commonStyles = {\n        position: 'absolute',\n        width: unitsAndLocations.unit,\n        height: 1.7 * unitsAndLocations.unit,\n        borderRadius: 7,\n        zIndex: 0,\n    }\n    if (side === 'left') {\n        return { ...commonStyles,\n            left: unitsAndLocations.leftGamingStackXY.x,\n            top: unitsAndLocations.leftGamingStackXY.y,\n        }\n    } else {\n        return { ...commonStyles,\n            left: unitsAndLocations.rightGamingStackXY.x,\n            top: unitsAndLocations.rightGamingStackXY.y,\n        }\n    }\n}\n\n\nconst GameStack = ({ viewStyle, topmost }) => {\n    const background = topmost === '' ? 'green' : 'papayawhip'\n    return (\n        <View style={[viewStyle, { backgroundColor: background }]}>\n            {topmost !== '' ?\n                <CardFront card={topmost}/>\n                :\n                null\n            }\n        </View>\n    )\n}\n\nconst CommonGameStacks = ({ topmostLeft, topmostRight, unitsAndLocations, roundIsOver }) => {\n\n    if (roundIsOver) {\n        return null\n    }\n\n    const cardViewStyleLeft = getCardViewStyle('left', unitsAndLocations)\n    const cardViewStyleRight = getCardViewStyle('right', unitsAndLocations)\n\n    return (\n        <View>\n            <GameStack\n                viewStyle={cardViewStyleLeft}\n                topmost={topmostLeft}\n            />\n            <GameStack\n                viewStyle={cardViewStyleRight}\n                topmost={topmostRight}\n            />\n        </View>\n    )\n}\n\nexport default CommonGameStacks\n\n","import React, { useState } from 'react'\nimport MovableFlippableCard from '../cards/MovableFlippableCard'\nimport { getCardFlipStateAfterDealing,\n    getComputerCardLocationAfterDealing,\n    getComputerCardStartLocation,\n} from './helperFunctions.js'\n\n\n\nconst ControllableComputerCard = React.forwardRef((props, ref) => {\n\n    const [locationAtStart] = useState(getComputerCardStartLocation(props.unitsAndLocations.unit, props.unitsAndLocations.spacing))\n    const [locationAfterDealing] = useState(getComputerCardLocationAfterDealing(props.index, props.unitsAndLocations.unit, props.unitsAndLocations.spacing, props.cardCount))\n    const [cardWillFlipAfterDealing] = useState(getCardFlipStateAfterDealing(props.index, props.cardCount))\n\n    if (props.cardState === 'null') {\n        return null\n    } else {\n        return (\n            <MovableFlippableCard\n                ref={ref}\n                index={props.index}\n                startLocation={locationAtStart}\n                card={props.card}\n                endLocation={locationAfterDealing}\n                flip={cardWillFlipAfterDealing}\n                unitsAndLocations={props.unitsAndLocations}\n            />\n        )\n    }\n})\n\nexport default ControllableComputerCard\n\n","import React, { useState, useImperativeHandle, useEffect } from 'react'\nimport { View } from 'react-native'\nimport ControllableComputerCard from './ControllableComputerCard'\nimport { toLeftOrRightGameStackInSingleCardDealing,\n    getIndexOfPossibleCardBelow,\n    getIndexOfCardToMoveAndTargetStack,\n    getCardStatesAtStart,\n    getOccupancyDataAfterFirstDealingCards,\n    handleCardStateChanges,\n    handleOccupancyDataChanges,\n    getCurrentPosition,\n    updateGameStackTopmostCard,\n    getEmptyPositionAndCardToMoveThere,\n    getComputerCardSolitaireLocation,\n    handleEmptyMoveOccupancyDataChanges,\n} from './helperFunctions.js'\n\n\nconst ComputerCards = React.forwardRef((props, ref) => {\n\n    const [computerCards] = useState(props.computerCards)\n    const [cardReferences] = useState(computerCards.map(card => React.createRef()))\n    const [indexDealNext, setIndexDealNext] = useState(props.computerCards.length > 15 ? 15 : 100)\n    const [cardStates, setCardStates] = useState(getCardStatesAtStart(props.computerCards.length))\n    const [occupancyData, setOccupancyData] = useState(getOccupancyDataAfterFirstDealingCards(props.computerCards.length))\n    const timing = props.unitsAndLocations.timing\n\n    const dealSolitaireCards = () => {\n        const limit = Math.min(computerCards.length, 15)\n        for (let i = 0; i < limit; i++) {\n            cardReferences[i].current.moveAndPossiblyFlipWithDelay(timing.moveDurationDealing, timing.flipDurationDealing)\n        }\n    }\n\n    const dealSingleCard = () => {\n        if (indexDealNext < props.computerCards.length) {\n            cardReferences[indexDealNext].current.moveAndPossiblyFlipWithDelay(timing.moveDurationDealing, timing.flipDurationDealing)\n            setTimeout(() => {\n                const toWhichStack = toLeftOrRightGameStackInSingleCardDealing('left', indexDealNext, computerCards.length)\n                updateGameStackTopmostCard(toWhichStack, props.topmostStuff, computerCards[indexDealNext])\n                handleCardStateChanges([{ index: indexDealNext, newState: 'null' }], cardStates, setCardStates)\n                setIndexDealNext(indexDealNext + 1)\n            }, timing.moveDurationDealing + timing.flipDurationDealing)\n        }\n    }\n\n    const moveCardToEmptyPosition = () => {\n        const emptyPositionAndCardToMoveThere = getEmptyPositionAndCardToMoveThere(occupancyData, computerCards)\n        const newLocation = getComputerCardSolitaireLocation(emptyPositionAndCardToMoveThere.emptyPosition, props.unitsAndLocations.unit, props.unitsAndLocations.spacing)\n        const cardToMoveIndex = emptyPositionAndCardToMoveThere.cardToMoveIndex\n        cardReferences[cardToMoveIndex].current.moveCardToLocation(newLocation, timing.moveDurationComputerCardGaming)\n        setTimeout(() => {\n            const currentPosition = getCurrentPosition(cardToMoveIndex, occupancyData)\n            handleEmptyMoveOccupancyDataChanges(cardToMoveIndex, emptyPositionAndCardToMoveThere.emptyPosition, occupancyData, setOccupancyData)\n            const indexOfCardBelow = getIndexOfPossibleCardBelow(cardToMoveIndex)\n            if (currentPosition > 4 && indexOfCardBelow !== -1) {\n                cardReferences[indexOfCardBelow].current.flipOnly(timing.flipDurationGaming)\n                setTimeout(() => {\n                    handleCardStateChanges([{ index: cardToMoveIndex, newState: 'movable' }, { index: indexOfCardBelow, newState: 'movable' }], cardStates, setCardStates)\n                }, timing.flipDurationGaming)\n            }\n        }, timing.moveDurationComputerCardGaming)\n    }\n\n    const startComputerCardMoveIfPossible = () => {\n        const indexOfCardToMove = getIndexOfCardToMoveAndTargetStack(computerCards, occupancyData, props.topmostStuff.valueLeft, props.topmostStuff.valueRight)\n        if (indexOfCardToMove.cardIndex !== -1) {\n            const targetPackLocation = indexOfCardToMove.target === 'left' ? props.unitsAndLocations.leftGamingStackXY : props.unitsAndLocations.rightGamingStackXY //  getTargetPackLocation(indexOfCardToMove.target, props.unitsAndLocations.unit, props.unitsAndLocations.spacing)\n            cardReferences[indexOfCardToMove.cardIndex].current.moveCardToLocation(targetPackLocation, timing.moveDurationComputerCardGaming)\n            finalizeCardMoveOrSendCardBackToSolitaire(indexOfCardToMove)\n        }\n    }\n\n    const finalizeCardMoveOrSendCardBackToSolitaire = (indexOfCardToMove) => {\n        // ! Currently the situation where the placement is no longer valid is not handled.\n        // ! Always the card is placed in the target stack, even though the player has put a card onto it.\n        // ! The sending back does not ever happen at the moment.\n        // ! The old first version of sending the card back when necessary is at the end of this file. Does not work.\n        // TODO: implement the sending back when placement no longer valid!!!\n        setTimeout(() => {\n            const currentPosition = getCurrentPosition(indexOfCardToMove.cardIndex, occupancyData)\n            updateGameStackTopmostCard(indexOfCardToMove.target, props.topmostStuff, computerCards[indexOfCardToMove.cardIndex])\n            handleCardStateChanges([{ index: indexOfCardToMove.cardIndex, newState: 'null' }], cardStates, setCardStates)\n            handleOccupancyDataChanges(indexOfCardToMove.cardIndex, 'vacate', 'none', occupancyData, setOccupancyData)\n            const indexOfCardBelow = getIndexOfPossibleCardBelow(indexOfCardToMove.cardIndex)\n            if (currentPosition > 4 && indexOfCardBelow !== -1) {\n                cardReferences[indexOfCardBelow].current.flipOnly(timing.flipDurationGaming)\n                setTimeout(() => {\n                    handleCardStateChanges([{ index: indexOfCardToMove.cardIndex, newState: 'null' }, { index: indexOfCardBelow, newState: 'movable' }], cardStates, setCardStates)\n                }, timing.flipDurationGaming)\n            }\n        }, timing.moveDurationComputerCardGaming)\n    }\n\n\n    const returnOccupancyData = () => {\n        return occupancyData\n    }\n    const returnGameRoundOverStateData = () => {\n        return {\n            occupancyData: occupancyData,\n            indexDealNext: indexDealNext,\n        }\n    }\n\n    useImperativeHandle(ref, () => {\n        return { dealSolitaireCards, dealSingleCard, startComputerCardMoveIfPossible, returnOccupancyData, returnGameRoundOverStateData, moveCardToEmptyPosition }\n    })\n\n    const flipPossibleCardBelow = (cardIndex) => {\n        const indexOfCardBelow = getIndexOfPossibleCardBelow(cardIndex)\n        if (indexOfCardBelow !== -1) {\n            cardReferences[indexOfCardBelow].current.flipOnly(timing.flipDurationGaming)\n        }\n    }\n\n    useEffect(() => {\n        const computerSolitaireCardsAreAllPlayed = occupancyData.every(position => position === -1)\n        if (computerSolitaireCardsAreAllPlayed) {\n            props.endRound('computer')\n        }\n    },[occupancyData, props])\n\n    return (\n        <View>\n            {computerCards.map((card, index) => {\n                return (\n                    <ControllableComputerCard\n                        key={index}\n                        index={index}\n                        card={card}\n                        ref={cardReferences[index]}\n                        spacing={props.spacing}\n                        cardCount={computerCards.length}\n                        flipPossibleCardBelow={flipPossibleCardBelow}\n                        unitsAndLocations={props.unitsAndLocations}\n                        cardState={cardStates[index]}\n                    />\n                )\n            })}\n        </View>\n    )\n\n\n})\n\nexport default ComputerCards\n\n\n\n// ! This is the old first version of sending the card back when necessary. Does not work.\n// setTimeout(() => {\n//     const placementIsStillValid = getPlacementValidity(computerCards[indexOfCardToMove.cardIndex], indexOfCardToMove.target, props.topmostStuff)\n//     if (placementIsStillValid) {\n//         const currentPosition = getCurrentPosition(indexOfCardToMove.cardIndex, occupancyData)\n//         updateGameStackTopmostCard(indexOfCardToMove.target, props.topmostStuff, computerCards[indexOfCardToMove.cardIndex])\n//         handleCardStateChanges([{ index: indexOfCardToMove.cardIndex, newState: 'null' }], cardStates, setCardStates)\n//         handleOccupancyDataChanges(indexOfCardToMove.cardIndex, 'vacate', 'none', occupancyData, setOccupancyData)\n//         const indexOfCardBelow = getIndexOfPossibleCardBelow(indexOfCardToMove.cardIndex)\n//         if (currentPosition > 4 && indexOfCardBelow !== -1) {\n//             cardReferences[indexOfCardBelow].current.flipOnly(timing.flipDurationGaming)\n//             setTimeout(() => {\n//                 handleCardStateChanges([{ index: indexOfCardToMove.cardIndex, newState: 'null' }, { index: indexOfCardBelow, newState: 'movable' }], cardStates, setCardStates)\n//             }, timing.flipDurationGaming)\n//         }\n//     } else {\n//         const location = getComputerCardLocationAfterDealing(indexOfCardToMove.cardIndex, props.unitsAndLocations.unit, props.unitsAndLocations.spacing, props.computerCards.length)\n//         cardReferences[indexOfCardToMove.cardIndex].current.moveCardToLocation(location)\n//     }\n// }, timing.moveDurationComputerCardGaming)\n\n","import React, { useState } from 'react'\nimport { View, TouchableOpacity, Text, StyleSheet } from 'react-native'\n\n\n\nconst ControlPanel = ({ unitsAndLocations, dealSolitaireCards, dealSingleCards, roundIsActive, changeGameIsActiveState }) => {\n\n    const [solitaireDealingDone, setSolitaireDealingDone] = useState(false)\n    const [displayText, setDisplayText] = useState('deal solitaire cards')\n\n    const styles = getStyles(unitsAndLocations.unit)\n\n    const performActions = () => {\n        if (solitaireDealingDone) {\n            setDisplayText('')\n            dealSingleCards()\n            setTimeout(() => {\n                changeGameIsActiveState()\n                setDisplayText('continue')\n            }, unitsAndLocations.timing.moveDurationDealing + unitsAndLocations.timing.flipDurationDealing)\n        } else {\n            setDisplayText('')\n            dealSolitaireCards()\n            setTimeout(() => {\n                setSolitaireDealingDone(true)\n                setDisplayText('continue')\n            }, (unitsAndLocations.timing.moveDurationDealing + unitsAndLocations.timing.flipDurationDealing) + 15 * 500)\n        }\n    }\n\n    if (displayText === '' || roundIsActive) {\n        return null\n    } else {\n        return (\n            <View style={{ position: 'absolute', top: 0, alignSelf: 'center' }}>\n                <TouchableOpacity onPress={performActions} style={styles.buttonView}>\n                    <Text style={styles.buttonText}>{displayText}</Text>\n                </TouchableOpacity>\n            </View>\n        )\n    }\n}\n\nexport default ControlPanel\n\n\n\nconst getStyles = (scaleUnit) => {\n    return StyleSheet.create({\n        contents:{\n            alignItems: 'center',\n            marginTop: scaleUnit / 2,\n        },\n        titleText: {\n            fontSize: scaleUnit / 1.5,\n            fontWeigth: 'bold',\n            color: '#B9CC3F',\n            fontFamily: 'Arial Black',\n        },\n        infoText: {\n            fontSize: scaleUnit / 2.75,\n            color: '#B9CC3F',\n            fontFamily: 'Arial',\n        },\n        spacer: {\n            height: scaleUnit / 2,\n        },\n        buttonView: {\n            backgroundColor: '#B9CC3F',\n            padding: scaleUnit / 10,\n            borderRadius: 8,\n            marginTop: scaleUnit / 10,\n        },\n        buttonText: {\n            color: 'green',\n            fontFamily: 'Arial',\n            fontSize: scaleUnit / 3,\n        },\n    })\n}","import React, { useState } from 'react'\nimport { View, Text } from 'react-native'\nimport { connect } from 'react-redux'\nimport PlayerCards from './PlayerCards'\nimport CommonGameStacks from './CommonGameStacks'\nimport ComputerCards from './ComputerCards'\nimport ControlPanel from './ControlPanel'\n\n\n\nconst Game = (props) => {\n\n    const [topmostLeft, setTopmostLeft] = useState('')\n    const [topmostRight, setTopmostRight] = useState('')\n    const [playerCards] = useState(props.game.playerStack)\n    const [computerCards] = useState(props.game.computerStack)\n    const [referencePlayerCards] = useState(React.createRef())\n    const [referenceComputerCards] = useState(React.createRef())\n    const [unitsAndLocations] = useState(props.unitsAndLocations)\n    const [cumulativeLeftStack, setCumulativeLeftStack] = useState([])\n    const [cumulativeRightStack, setCumulativeRightStack] = useState([])\n    const [roundIsActive, setRoundIsActive] = useState(false)\n\n    const dealSolitaireCards = () => {\n        referencePlayerCards.current.dealSolitaireCards()\n        referenceComputerCards.current.dealSolitaireCards()\n    }\n    const dealSingleCards = () => {\n        referencePlayerCards.current.dealSingleCard()\n        referenceComputerCards.current.dealSingleCard()\n    }\n\n    const changeTopmostLeft = (card) => {\n        setTopmostLeft(card)\n        let updated = [...cumulativeLeftStack]\n        updated.push(card)\n        setCumulativeLeftStack(updated)\n    }\n\n    const changeTopmostRight = (card) => {\n        setTopmostRight(card)\n        let updated = [...cumulativeRightStack]\n        updated.push(card)\n        setCumulativeRightStack(updated)\n    }\n\n    const endRound = (theWinner) => {\n        const gameRoundOverPlayerStateData = referencePlayerCards.current.returnGameRoundOverStateData()\n        const gameRoundOverComputerStateData = referenceComputerCards.current.returnGameRoundOverStateData()\n        const topmostValues = referencePlayerCards.current.returnTopmostValues()\n        props.gameRoundOver(theWinner, gameRoundOverPlayerStateData, gameRoundOverComputerStateData, topmostValues, cumulativeLeftStack, cumulativeRightStack)\n    }\n\n    const topmostStuff = {\n        valueLeft: topmostLeft,\n        valueRight: topmostRight,\n        changeLeft: changeTopmostLeft,\n        changeRight: changeTopmostRight,\n    }\n\n\n    const changeGameIsActiveState = () => {\n        const isNewCardDealingNeeded = checkIfNewCardDealingIsNeeded()\n        if (isNewCardDealingNeeded) {\n            setRoundIsActive(false)\n        } else {\n            setRoundIsActive(true)\n            setTimeout(() => {\n                performRecurrentComputerCardAction()\n            }, 4000)\n        }\n    }\n\n    const performRecurrentComputerCardAction = () => {\n        if (referenceComputerCards !== null && referenceComputerCards.current !== null) {\n            const occupancyDataComputer = referenceComputerCards.current.returnOccupancyData()\n            const couldMoveCardToEmptyPosition = couldMoveCardsToEmptyPosition(occupancyDataComputer)\n            if (couldMoveCardToEmptyPosition) {\n                referenceComputerCards.current.moveCardToEmptyPosition()\n            } else {\n                const topmostValues = referencePlayerCards.current.returnTopmostValues()\n                const occupancyDataPlayer = referencePlayerCards.current.returnOccupancyData()\n                const dealingNewCardsIsNeeded = newCardsAreNeeded(occupancyDataPlayer, occupancyDataComputer, topmostValues.left, topmostValues.right, playerCards, computerCards)\n                if (dealingNewCardsIsNeeded) {\n                    setRoundIsActive(false)\n                } else {\n                    referenceComputerCards.current.startComputerCardMoveIfPossible()\n                }\n            }\n            setTimeout(() => {\n                performRecurrentComputerCardAction()\n            }, 4000)\n        }\n    }\n\n\n    const checkIfNewCardDealingIsNeeded = () => {\n        const occupancyDataPlayer = referencePlayerCards.current.returnOccupancyData()\n        const occupancyDataComputer = referenceComputerCards.current.returnOccupancyData()\n        const topmostValues = referencePlayerCards.current.returnTopmostValues()\n        return newCardsAreNeeded(occupancyDataPlayer, occupancyDataComputer, topmostValues.left, topmostValues.right, playerCards, computerCards)\n    }\n\n\n\n    return (\n        <View>\n            <CommonGameStacks\n                topmostLeft={topmostLeft}\n                topmostRight={topmostRight}\n                unitsAndLocations={unitsAndLocations}\n            />\n            <PlayerCards\n                playerCards={playerCards}\n                ref={referencePlayerCards}\n                endRound={endRound}\n                unitsAndLocations={unitsAndLocations}\n                topmostStuff={topmostStuff}\n                roundIsActive={roundIsActive}\n            />\n            <ComputerCards\n                computerCards={computerCards}\n                ref={referenceComputerCards}\n                endRound={endRound}\n                unitsAndLocations={unitsAndLocations}\n                topmostStuff={topmostStuff}\n                roundIsActive={roundIsActive}\n            />\n            <ControlPanel\n                unitsAndLocations={unitsAndLocations}\n                dealSolitaireCards={dealSolitaireCards}\n                dealSingleCards={dealSingleCards}\n                roundIsActive={roundIsActive}\n                changeGameIsActiveState={changeGameIsActiveState}\n            />\n            <Text style={{ position: 'absolute', top: (0.5 + 1.5) * 1.7 * unitsAndLocations.unit, left: (1/6 + 1) * unitsAndLocations.unit,\n                fontStyle: 'bold', fontSize: unitsAndLocations.unit / 2 }}>PROTOTYPE</Text>\n        </View>\n    )\n}\n\nconst mapStateToProps = state => {\n    return {\n        game: state.game,\n    }\n}\n\nconst mapDispatchToProps = {\n\n}\n\nconst ConnectedGame = connect(mapStateToProps, mapDispatchToProps)(Game)\n\n\nexport default ConnectedGame\n\n\n\n\n// HELPER FUNCTIONS FOR COMPONENT ConnectedGame\n\nconst newCardsAreNeeded = (occupancyDataPlayer, occupancyDataComputer, topmostLeft, topmostRight, playerCards, computerCards) => {\n    const visiblePlayerCardValues = getVisibleCards(occupancyDataPlayer, playerCards)\n    const visibleComputerCardValues = getVisibleCards(occupancyDataComputer, computerCards)\n    if (couldMoveCardsToEmptyPosition(occupancyDataPlayer) || couldMoveCardsToEmptyPosition(occupancyDataComputer)) {\n        return false\n    }\n    const playerCardsNeedNewDealing = newOneCardDealingIsNeeded(visiblePlayerCardValues, topmostLeft, topmostRight)\n    if (!playerCardsNeedNewDealing) {\n        return false\n    }\n    const computerCardsNeedNewDealing = newOneCardDealingIsNeeded(visibleComputerCardValues, topmostLeft, topmostRight)\n    if (!computerCardsNeedNewDealing) {\n        return false\n    }\n    return true\n}\n\nconst couldMoveCardsToEmptyPosition = (occupancyData) => {\n    let emptyPositionsAvailable = false\n    const number = Math.min(5, occupancyData.length)\n    for (let i = 0; i < number; i++) {\n        if (occupancyData[i] === -1) {\n            emptyPositionsAvailable = true\n        }\n    }\n    let cardAvailabelForMovingToEmptyPosition = false\n    if (emptyPositionsAvailable) {\n        const count = Math.min(9, occupancyData.length)\n        for (let i = 5; i < count; i++) {\n            if (occupancyData[i] !== -1) {\n                cardAvailabelForMovingToEmptyPosition = true\n            }\n        }\n    }\n    return cardAvailabelForMovingToEmptyPosition\n}\n\nconst newOneCardDealingIsNeeded = (visibleCardValues, leftValue, rightValue) => {\n    for (let i = 0; i < visibleCardValues.length; i++) {\n        const leftOK = valueIsOKforPlacingOntoAStack(visibleCardValues[i], leftValue)\n        if (leftOK) {\n            return false\n        }\n        const rightOK = valueIsOKforPlacingOntoAStack(visibleCardValues[i], rightValue)\n        if (rightOK) {\n            return false\n        }\n    }\n    return true\n}\n\nconst getVisibleCards = (occupancies, cards) => {\n    let visibleCardValues = []\n    const sets = [[0], [5,1], [9,6,2], [12,10,7,3], [14,13,11,8,4]]\n    let i = 0\n    while (i < 5) {\n        let j = 0\n        let look = true\n        while (look && j < sets[i].length) {\n            if (sets[i][j] < cards.length) {\n                const indexOfCardAtThisPosition = occupancies[sets[i][j]]\n                if (indexOfCardAtThisPosition !== -1) {\n                    visibleCardValues.push(cards[indexOfCardAtThisPosition].value)\n                    look = false\n                }\n            }\n            j++\n        }\n        i++\n    }\n    return visibleCardValues\n}\n\nexport const valueIsOKforPlacingOntoAStack = (newValue, currentTopmostValue) => {\n    if (currentTopmostValue === 1) {\n        if (newValue === 2 || newValue === 13) {\n            return true\n        }\n    } else if (currentTopmostValue === 13) {\n        if (newValue === 12 || newValue === 1) {\n            return true\n        }\n    } else {\n        if (newValue === currentTopmostValue + 1 || newValue === currentTopmostValue - 1) {\n            return true\n        } else {\n            return false\n        }\n    }\n}\n\n\n\n\n","import React from 'react'\nimport { View, TouchableOpacity, StyleSheet, Text, Animated } from 'react-native'\n\n\nconst WelcomeView = ({ startSetting, scaleUnit }) => {\n\n    const styles = getStyles(scaleUnit)\n\n    const visibility = new Animated.Value(1)\n    const animatedVisibility = { opacity: visibility }\n    const fadeOut = () => {\n        Animated.timing(visibility, {\n            toValue: 0, duration: 1000,\n        }).start()\n        setTimeout(() => {\n            startSetting()\n        }, 1000)\n    }\n\n    return (\n        <View>\n            <Animated.View style={animatedVisibility}>\n                <View style={styles.contents}>\n                    <Text style={styles.titleText}>nopsa</Text>\n                    <Text style={styles.infoText}>a card game for those with</Text>\n                    <Text style={styles.infoText}> skill, speed and luck</Text>\n                    <View style={styles.spacer}></View>\n                    <Text style={styles.infoText}>feel like playing?</Text>\n                    <TouchableOpacity onPress={fadeOut} style={styles.buttonView}>\n                        <Text style={styles.buttonText}>setup a new game</Text>\n                    </TouchableOpacity>\n                </View>\n            </Animated.View>\n        </View>\n    )\n}\n\n\nconst getStyles = (scaleUnit) => {\n    return StyleSheet.create({\n        contents:{\n            alignItems: 'center',\n            marginTop: scaleUnit / 2,\n        },\n        titleText: {\n            fontSize: scaleUnit / 1.5,\n            fontWeigth: 'bold',\n            color: '#B9CC3F',\n            fontFamily: 'Arial Black',\n        },\n        infoText: {\n            fontSize: scaleUnit / 2.5,\n            color: '#B9CC3F',\n            fontFamily: 'Arial',\n        },\n        spacer: {\n            height: scaleUnit / 2,\n        },\n        buttonView: {\n            backgroundColor: '#B9CC3F',\n            padding: scaleUnit / 5,\n            borderRadius: 8,\n            marginTop: scaleUnit / 5,\n        },\n        buttonText: {\n            color: 'green',\n            fontFamily: 'Arial',\n            fontSize: scaleUnit / 2.5,\n        },\n    })\n}\n\n\nexport default WelcomeView\n\n","import React from 'react'\nimport {  View } from 'react-native'\n\nconst SmallDot = ({ value, dotViewWidth, dotNumber }) => {\n\n    const changingOpacity = (value >= dotNumber) ? 1 : 0.2\n\n    const styleOuterView = {\n        width: dotViewWidth,\n        height: dotViewWidth * 1.4,\n        justifyContent: 'center',\n        alignItems: 'center',\n    }\n    const styleInnerView = {\n        width: 4,\n        height: 4,\n        opacity: changingOpacity,\n        backgroundColor: '#B9CC3F',\n        borderRadius: 3,\n    }\n\n\n    return (\n        <View style={styleOuterView}>\n            <View style={styleInnerView}/>\n        </View>\n    )\n}\n\nexport default SmallDot\n\n","import React from 'react'\nimport {  View, TouchableOpacity } from 'react-native'\n\n\nconst LargeDot = ({ value, dotNumber, dotViewWidth, handleSelectionChanged }) => {\n\n    const changingOpacity = (value >= dotNumber) ? 1 : 0.2\n\n    const styleOuterView = {\n        width: dotViewWidth,\n        height: dotViewWidth * 1.4,\n        justifyContent: 'center',\n        alignItems: 'center',\n        borderWidth: 1.5,\n        opacity: changingOpacity,\n        borderColor: '#B9CC3F',\n        borderRadius: dotViewWidth,\n    }\n    const styleInnerView = {\n        width: 4,\n        height: 4,\n        backgroundColor: '#B9CC3F',\n        borderRadius: 2.0,\n    }\n\n\n    return (\n        <TouchableOpacity onPress={() => handleSelectionChanged(dotNumber)}>\n            <View style={styleOuterView}>\n                <View  style={styleInnerView}/>\n            </View>\n        </TouchableOpacity>\n    )\n}\n\nexport default LargeDot\n\n","import React, { useState, useImperativeHandle } from 'react'\nimport {  View, StyleSheet } from 'react-native'\nimport SmallDot from './SmallDot'\nimport LargeDot from './LargeDot'\n\n\n\n\nconst DottedSlider = React.forwardRef((props, ref) => {\n\n    const scaleUnit = props.scaleUnit\n    const index = props.optionCount - 1\n    const [selectedValue, setSelectedValue] = useState(1)\n    const dotViewWidth = 6 * scaleUnit / 30\n\n    const handleSelectionChanged = (newValue) => {\n        let startValue = selectedValue\n        const changes = Math.max(newValue - selectedValue, selectedValue - newValue)\n        function changeUpOrDown(direction) {\n            return setInterval(() => {\n                if (direction === 'up' && startValue < newValue) {\n                    startValue++\n                    setSelectedValue(startValue)\n                } else if (direction === 'down' && newValue < startValue) {\n                    startValue--\n                    setSelectedValue(startValue)\n                }\n            }, 180 / changes)\n        }\n        let changeInterval\n        if (selectedValue < newValue) {\n            changeInterval = changeUpOrDown('up')\n        } else if (selectedValue > newValue) {\n            changeInterval = changeUpOrDown('down')\n        }\n        setTimeout(() => {\n            clearInterval(changeInterval)\n        }, 180 * changes)\n    }\n\n    const getSelectedValue = () => {\n        return (selectedValue - 1) / 6 + 1\n    }\n    useImperativeHandle(ref, () => {\n        return { getSelectedValue }\n    })\n\n\n    const displayDotSlider = () => {\n        let dots = []\n        for (let i = 1; i <= index * 6 + 1; i++) {\n            if ((i - 1) % 6 !== 0) {\n                dots.push(\n                    <SmallDot\n                        key={i}\n                        value={selectedValue}\n                        dotViewWidth={dotViewWidth}\n                        dotNumber={i}\n                    />)\n            } else {\n                dots.push(\n                    <LargeDot\n                        key={i}\n                        value={selectedValue}\n                        dotViewWidth={dotViewWidth}\n                        handleSelectionChanged={handleSelectionChanged}\n                        dotNumber={i}\n                    />)\n            }\n        }\n        return dots\n    }\n\n    return (\n        <View style={styles.container}>\n            <View style={styles.dotSliderView}>\n                {displayDotSlider()}\n            </View>\n        </View>\n\n    )\n\n\n})\n\nexport default DottedSlider\n\n\nconst styles = StyleSheet.create({\n    container: {\n        alignItems: 'center',\n        marginBottom: 50,\n    },\n    instructionText: {\n        color: '#B9CC3F',\n        fontFamily: 'Arial',\n        fontWeight: 'bold',\n        marginBottom: 15,\n    },\n    dotSliderView: {\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n})\n\n","import React from 'react'\nimport { View, TouchableOpacity } from 'react-native'\nimport CardBack from '../cards/CardBack'\n\nconst Stack = ({ displayColor, number, selectStack, scaleUnit }) => {\n\n    const stackStyle = {\n        width: scaleUnit * 1.5,\n        height: scaleUnit * 1.7 * 1.3,\n        borderRadius: 7 * 1.3,\n        borderWidth: 1.3,\n        justifyContent: 'center',\n        alignItems: 'center',\n    }\n\n    return (\n        <TouchableOpacity onPress={() => selectStack(number)}>\n            <View style={[stackStyle, displayColor]}>\n                <CardBack scaleUnit={scaleUnit}/>\n            </View>\n        </TouchableOpacity>\n    )\n}\n\nexport default Stack\n\n","import React, { useState, useImperativeHandle } from 'react'\nimport { View, StyleSheet } from 'react-native'\nimport Stack from './Stack'\n\n\nconst StackSelection = React.forwardRef((props, ref) => {\n\n    const scaleUnit = props.scaleUnit\n    const styles = getStyles()\n\n    const [selectedStack, setSelectedStack] = useState(0)\n    const changedSelection = (id) => {\n        setSelectedStack(id)\n    }\n\n    const getSelectedStack = () => {\n        if (selectedStack === 0) {\n            return { player: 0, computer: 1 }\n        } else {\n            return { player: 1, computer: 0 }\n        }\n    }\n    useImperativeHandle(ref, () => {\n        return { getSelectedStack }\n    })\n\n    const borderColorStack1 = selectedStack === 0 ? { borderColor: '#B9CC3F' } : { borderColor: 'green' }\n    const borderColorStack2 = selectedStack === 1 ?  { borderColor: '#B9CC3F' } : { borderColor: 'green' }\n\n\n    return (\n        <View style={styles.container}>\n            <View style={{ flexDirection: 'row' }}>\n                <Stack displayColor={borderColorStack1} number={0} selectStack={changedSelection} scaleUnit={scaleUnit}/>\n                <View style={{ width: 30 }}/>\n                <Stack displayColor={borderColorStack2} number={1} selectStack={changedSelection} scaleUnit={scaleUnit}/>\n            </View>\n        </View>\n    )\n})\n\nexport default StackSelection\n\n\nconst getStyles = (scaleUnit) => {\n    return  StyleSheet.create({\n        container: {\n            alignItems: 'center',\n        },\n        instructionText: {\n            fontSize: scaleUnit / 2.5,\n            color: '#B9CC3F',\n            fontFamily: 'Arial',\n            marginBottom: scaleUnit / 3,\n        },\n    })\n}\n","import React from 'react'\nimport { View, TouchableOpacity, Animated, StyleSheet, Text } from 'react-native'\nimport { connect } from 'react-redux'\nimport { setGameSettings } from '../../reducers/gameReducer'\nimport DottedSlider from './DottedSlider'\nimport StackSelection from './StackSelection'\nimport { createStacks } from './createStacks.js'\n\n\nconst SelectionView = (props) => {\n\n    const scaleUnit = props.scaleUnit\n    const styles = getStyles(scaleUnit)\n\n    const referenceSkill = React.createRef()\n    const referenceSpeed = React.createRef()\n    const referenceStack = React.createRef()\n\n    const visibility = new Animated.Value(1)\n    const animatedVisibility = { opacity: visibility }\n\n    const saveSelectedSettings = () => {\n        Animated.timing(visibility, {\n            toValue: 0, duration: 1000,\n        }).start()\n        const stacks = createStacks()\n        setTimeout(() => {\n            props.setGameSettings({\n                skill: referenceSkill.current.getSelectedValue(),\n                speed: referenceSpeed.current.getSelectedValue(),\n                playerStack: stacks[referenceStack.current.getSelectedStack().player],\n                computerStack : stacks[referenceStack.current.getSelectedStack().computer],\n                isOn: true,\n            })\n        }, 1000)\n\n    }\n\n\n    return (\n        <Animated.View style={[styles.container, animatedVisibility]}>\n            <Text style={styles.instructionText}>select opponent skill level</Text>\n            <DottedSlider\n                scaleUnit={scaleUnit}\n                optionCount={3}\n                ref={referenceSkill}\n            />\n            <Text style={styles.instructionText}>select opponent speed</Text>\n            <DottedSlider\n                scaleUnit={scaleUnit}\n                optionCount={5}\n                ref={referenceSpeed}\n            />\n            <Text style={styles.instructionText}>select your stack</Text>\n            <StackSelection\n                scaleUnit={scaleUnit}\n                ref={referenceStack}\n            />\n            <View style={styles.spacer}></View>\n            <TouchableOpacity onPress={saveSelectedSettings} style={styles.buttonView}>\n                <Text style={styles.buttonText}>save settings</Text>\n            </TouchableOpacity>\n        </Animated.View>\n    )\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        game: state.game,\n    }\n}\n\nconst mapDispatchToProps = {\n    setGameSettings,\n}\n\nconst ConnectedSelectionView = connect(mapStateToProps, mapDispatchToProps)(SelectionView)\n\nexport default ConnectedSelectionView\n\n\nconst getStyles = (scaleUnit) => {\n    return  StyleSheet.create({\n        container: {\n            alignItems: 'center',\n            marginTop: 50,\n        },\n        instructionText: {\n            fontSize: scaleUnit / 2.5,\n            color: '#B9CC3F',\n            fontFamily: 'Arial',\n            marginBottom: scaleUnit / 3,\n        },\n        spacer: {\n            height: scaleUnit / 2,\n        },\n        buttonView: {\n            backgroundColor: '#B9CC3F',\n            padding: scaleUnit / 5,\n            borderRadius: 8,\n            marginTop: scaleUnit / 5,\n        },\n        buttonText: {\n            color: 'green',\n            fontFamily: 'Arial',\n            fontSize: scaleUnit / 2.5,\n        },\n    })\n}\n\n\n","import shuffle from 'shuffle-array'\n\nexport const createStacks = () => {\n    const stack = []\n    for (let j = 1; j < 5; j++) {\n\n        for (let i = 1; i < 14; i++) {\n            stack.push({ suit: j, value: i })\n        }\n\n    }\n\n    const stackShuffled = shuffle(stack)\n\n    return [ stackShuffled.slice(0, 26), stackShuffled.slice(26) ]\n}\n\n","import React, { useState } from 'react'\nimport { View } from 'react-native'\nimport WelcomeView from './WelcomeView'\nimport SelectionView from './SelectionView'\n\n\nconst SetUpGame = ({ scaleUnit }) => {\n\n    const [settingNew, setSettingNew] = useState(false)\n\n    const startSettingUpNewGame = () => {\n        setSettingNew(true)\n    }\n\n    return (\n        <View>\n            {settingNew ?\n                <SelectionView  scaleUnit={scaleUnit}/>\n                :\n                <WelcomeView startSetting={startSettingUpNewGame} scaleUnit={scaleUnit}/>\n            }\n        </View>\n    )\n}\n\nexport default SetUpGame\n\n\n\n\n\n\n","import React from 'react'\nimport { View, Text, Animated, TouchableOpacity, StyleSheet } from 'react-native'\nimport { connect } from 'react-redux'\nimport { endGame } from '../../reducers/gameReducer'\n\nconst EndView = ({ winner, styles, animatedVisibility, fadeOut }) => {\n    let outcome = winner === 'player' ? 1 : 2\n    const textOptions = {\n        title: { 1: 'yippee!', 2: 'oh no...' },\n        text1: { 1: 'you won the game', 2: 'you lost the game' },\n        text2: { 1: 'congratulations!', 2: 'better luck next time...' },\n    }\n    return (\n        <View>\n            <Animated.View style={animatedVisibility}>\n                <View style={styles.contents}>\n                    <Text style={styles.titleText}>{textOptions.title[outcome]}</Text>\n                    <View style={styles.spacer}></View>\n                    <Text style={styles.infoText}>{textOptions.text1[outcome]}</Text>\n                    <View style={styles.spacer}></View>\n                    <Text style={styles.infoText}>{textOptions.text2[outcome]}</Text>\n                    <View style={styles.spacer}></View>\n                    <View style={styles.spacer}></View>\n                    <TouchableOpacity onPress={fadeOut} style={styles.buttonView}>\n                        <Text style={styles.buttonText}>new game</Text>\n                    </TouchableOpacity>\n                </View>\n            </Animated.View>\n        </View>\n    )\n}\n\n\nconst ContinueView = ({  styles, animatedVisibility, fadeOut, playerCardsCount, computerCardsCount  }) => {\n    return (\n        <View>\n            <Animated.View style={animatedVisibility}>\n                <View style={styles.contents}>\n                    <Text style={styles.titleText}>situation</Text>\n                    <View style={styles.spacer}></View>\n                    <Text style={styles.infoText}>number of your cards:</Text>\n                    <Text style={styles.infoText}>{playerCardsCount}</Text>\n                    <View style={styles.spacer}></View>\n                    <Text style={styles.infoText}>number of computer cards:</Text>\n                    <Text style={styles.infoText}>{computerCardsCount}</Text>\n                    <View style={styles.spacer}></View>\n                    <TouchableOpacity onPress={fadeOut} style={styles.buttonView}>\n                        <Text style={styles.buttonText}>continue to next round</Text>\n                    </TouchableOpacity>\n                </View>\n            </Animated.View>\n        </View>\n    )\n}\n\n\n\nconst Winner = (props) => {\n\n    const styles = getStyles(props.unitsAndLocations.unit)\n    const visibility = new Animated.Value(1)\n    const animatedVisibility = { opacity: visibility }\n\n    const fadeOut = () => {\n        Animated.timing(visibility, {\n            toValue: 0, duration: 1000,\n        }).start()\n        if (props.game.playerStack.length === 0 || props.game.computerStack.length === 0) {\n            props.continueToNextRound()\n            props.endGame()\n        } else {\n            setTimeout(() => {\n                props.continueToNextRound()\n            }, 1000)\n        }\n\n    }\n\n    if (props.game.playerStack.length === 0 || props.game.computerStack.length === 0) {\n        return (\n            <EndView\n                styles={styles}\n                animatedVisibility={animatedVisibility}\n                fadeOut={fadeOut}\n                winner={props.winner}\n            />\n        )\n    } else {\n        return (\n            <ContinueView\n                styles={styles}\n                animatedVisibility={animatedVisibility}\n                fadeOut={fadeOut}\n                playerCardsCount={props.game.playerStack.length}\n                computerCardsCount={props.game.computerStack.length}\n            />\n        )\n    }\n}\n\n\nconst mapStateToProps = state => {\n    return {\n        game: state.game,\n    }\n}\n\nconst mapDispatchToProps = {\n    endGame,\n}\n\nconst ConnectedWinner = connect(mapStateToProps, mapDispatchToProps)(Winner)\n\nexport default ConnectedWinner\n\n\nconst getStyles = (scaleUnit) => {\n    return StyleSheet.create({\n        contents:{\n            alignItems: 'center',\n            marginTop: scaleUnit / 2,\n        },\n        titleText: {\n            fontSize: scaleUnit / 1.5,\n            fontWeigth: 'bold',\n            color: '#B9CC3F',\n            fontFamily: 'Arial Black',\n        },\n        infoText: {\n            fontSize: scaleUnit / 2.5,\n            color: '#B9CC3F',\n            fontFamily: 'Arial',\n        },\n        spacer: {\n            height: scaleUnit / 2,\n        },\n        buttonView: {\n            backgroundColor: '#B9CC3F',\n            padding: scaleUnit / 5,\n            borderRadius: 8,\n            marginTop: scaleUnit / 5,\n        },\n        buttonText: {\n            color: 'green',\n            fontFamily: 'Arial',\n            fontSize: scaleUnit / 2.5,\n        },\n    })\n}\n\n\n","import React, { useState } from 'react'\nimport { View, Dimensions, StyleSheet } from 'react-native'\nimport { connect } from 'react-redux'\nimport Game from './game/Game'\nimport SetUpGame from './setup/SetUpGame'\nimport Winner from './game/Winner'\nimport {  setGameRoundResults } from '../reducers/gameReducer'\n\n\nconst GameOfNopsa = (props) => {\n\n    const screenWidth = Dimensions.get('window').width\n    const screenHeight = Dimensions.get('window').height\n    const scaleUnit = Math.min(screenWidth / 6, screenHeight /(6 * 1.7))\n    const styles = getStyles(screenWidth, screenHeight)\n    const spacing = (screenWidth - 6 * scaleUnit) / 2\n    const unitsAndLocations = getUnitsAndLocations(scaleUnit, spacing)\n    const gameIsOn = props.game.isOn\n\n    const [winner, setWinner] = useState('none')\n\n    const gameRoundOver = (theWinner, gameRoundOverPlayerStateData, gameRoundOverComputerStateData, topmostValues, cumulativeLeftStack, cumulativeRightStack) => {\n        const computerCards = props.game.computerStack\n        const playerCards = props.game.playerStack\n\n        const computerLeftoverSolitaireCardIndexes = getLeftoverSolitaireCardIndexes(gameRoundOverComputerStateData)\n        const playerLeftoverSolitaireCardIndexes = getLeftoverSolitaireCardIndexes(gameRoundOverPlayerStateData)\n        const computerLeftoverDealingCards = getLeftoverDealingCards(gameRoundOverComputerStateData, computerCards.length)\n        const playerLeftoverDealingCards = getLeftoverDealingCards(gameRoundOverPlayerStateData, playerCards.length)\n        const cumulativeStackToComputer = getCumulativeStack(theWinner, 'computer', cumulativeLeftStack, cumulativeRightStack)\n        const cumulativeStackToPlayer = getCumulativeStack(theWinner, 'player', cumulativeLeftStack, cumulativeRightStack)\n\n        const newComputerCardIndexes = computerLeftoverSolitaireCardIndexes.concat(computerLeftoverDealingCards)\n        const newPlayerCardIndexes = playerLeftoverSolitaireCardIndexes.concat(playerLeftoverDealingCards)\n        const newComputerStack = getNewStack(newComputerCardIndexes, computerCards, cumulativeStackToComputer)\n        const newPlayererStack = getNewStack(newPlayerCardIndexes, playerCards, cumulativeStackToPlayer)\n        props.setGameRoundResults({ playerStack: newPlayererStack, computerStack: newComputerStack })\n        setWinner(theWinner)\n    }\n\n    const continueToNextRound = () => {\n        setWinner('none')\n    }\n\n    const GameWithRounds = () => {\n        if (winner === 'none') {\n            return <Game scaleUnit={scaleUnit} spacing={spacing} gameRoundOver={gameRoundOver} unitsAndLocations={unitsAndLocations}/>\n        } else {\n            return <Winner winner={winner} unitsAndLocations={unitsAndLocations} continueToNextRound={continueToNextRound}/>\n        }\n    }\n    if (gameIsOn) {\n        return (\n            <View style={styles.screen}>\n                <GameWithRounds/>\n            </View>\n        )\n    } else {\n        return (\n            <View style={styles.screen}>\n                <SetUpGame scaleUnit={scaleUnit}/>\n            </View>\n        )\n    }\n\n}\n\nconst mapStateToProps = state => {\n    return {\n        game: state.game,\n    }\n}\n\nconst mapDispatchToProps = {\n    setGameRoundResults,\n}\n\nconst ConnectedGameOfNopsa = connect(mapStateToProps, mapDispatchToProps)(GameOfNopsa)\n\nexport default ConnectedGameOfNopsa\n\n\n\n\n\nconst getStyles = (screenWidth, screenHeight) => {\n    return StyleSheet.create({\n        screen: {\n            width: screenWidth,\n            height: screenHeight,\n            backgroundColor: 'green',\n        },\n    })\n}\n\n\nconst getUnitsAndLocations = (unit, spacing) => {\n\n    const leftDealingStackXY = {\n        x: spacing + (1/6) * unit,\n        y: (0.5 + 1.5 + 0.75) * 1.7 * unit,\n    }\n    const leftGamingStackXY = {\n        x: spacing + (1/6 + 1 + 4/6) * unit,\n        y: (0.5 + 1.5 + 0.75) * 1.7 * unit,\n    }\n    const rightGamingStackXY = {\n        x: spacing + (1/6 + 1 + 4/6 + 1 + 2/6) * unit,\n        y: (0.5 + 1.5 + 0.75) * 1.7 * unit,\n    }\n    const rightDealingStackXY = {\n        x: spacing + (1/6 + 1 + 4/6 + 1 + 2/6 + 1 + 4/6) * unit,\n        y: (0.5 + 1.5 + 0.75) * 1.7 * unit,\n    }\n\n    return {\n        unit: unit,\n        spacing: spacing,\n        leftDealingStackXY: leftDealingStackXY,\n        leftGamingStackXY: leftGamingStackXY,\n        rightGamingStackXY: rightGamingStackXY,\n        rightDealingStackXY: rightDealingStackXY,\n        timing: {\n            moveDurationDealing: 700,\n            flipDurationDealing: 400,\n            moveDurationComputerCardGaming: 200,\n            flipDurationGaming: 200,\n            movementFinalization: 50,\n        },\n    }\n}\n\n\n\nconst getLeftoverSolitaireCardIndexes = (gameRoundOverStateData) => {\n    return gameRoundOverStateData.occupancyData.filter(cardIndex => cardIndex !== -1)\n}\nconst getLeftoverDealingCards = (gameRoundOverStateData, cardCount) => {\n    const firstIndexNotDealt = gameRoundOverStateData.indexDealNext\n    let leftovers = []\n    for (let i = firstIndexNotDealt; i < cardCount; i++) {\n        leftovers.push(i)\n    }\n    return leftovers\n}\nconst getCumulativeStack = (winner, toWhom, cumulativeLeftStack, cumulativeRightStack) => {\n    const winnerCumulativeStack = cumulativeLeftStack.length < cumulativeRightStack.length ? cumulativeLeftStack : cumulativeRightStack\n    const loserCumulativeStack = cumulativeLeftStack.length < cumulativeRightStack.length ? cumulativeRightStack : cumulativeLeftStack\n    if (toWhom === winner) {\n        return winnerCumulativeStack\n    }\n    return loserCumulativeStack\n}\nconst getNewStack = (indexes, oldStack, cumulativeStack) => {\n    let leftoverCards = indexes.map(index => {\n        return oldStack[index]\n    })\n    const newCards = leftoverCards.concat(cumulativeStack)\n    return newCards\n}\n\n\n\n\n\n","\nimport React from 'react'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport rootReducer from './reducers/rootReducer'\nimport GameOfNopsa from './components/GameOfNopsa'\n\nconst store = createStore(rootReducer)\n\nconst App = () => {\n    return (\n        <Provider store={store}>\n            <GameOfNopsa/>\n        </Provider>\n    )\n}\n\nexport default App\n","// import React from 'react';\n// import ReactDOM from 'react-dom';\n// import './index.css';\n// import App from './App';\n// import * as serviceWorker from './serviceWorker';\n\n// ReactDOM.render(\n//   <React.StrictMode>\n//     <App />\n//   </React.StrictMode>,\n//   document.getElementById('root')\n// );\n\n// // If you want your app to work offline and load faster, you can change\n// // unregister() to register() below. Note this comes with some pitfalls.\n// // Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n"],"sourceRoot":""}